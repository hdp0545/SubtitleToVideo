<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="PhoneMapper">

	<insert id="regist" parameterType="com.ssafy.dto.PhonesDTO">
		insert into ssafydb.phones (num, model, price, vcode)
		values (#{num}, #{model}, #{price}, #{vcode})
	</insert>

	<sql id="selectBody">
		SELECT phone.num, phone.model, phone.price, phone.vcode, com.vendor
		FROM ssafydb.phones phone, ssafydb.company com
		WHERE phone.vcode = com.vcode
	</sql>

	<select id="list" resultType="com.ssafy.dto.PhonesDTO">
		<include refid="selectBody" />
		ORDER BY phone.num DESC
	</select>

	<select id="detail" resultType="com.ssafy.dto.PhonesDTO">
		<include refid="selectBody" />
		AND phone.num = #{num}
	</select>

	<delete id="deleteArr">
		DELETE from ssafydb.phones
		WHERE num IN
		<foreach item="item" index="index" collection="array" open="(" separator="," close=")">
			#{item}
		</foreach>
	</delete>

</mapper>
